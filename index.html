<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connection: ESTABLISHED</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@200;400;500&family=Pinyon+Script&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.8.0/vanilla-tilt.min.js"></script>

    <style>
        :root {
            --gold: #D4AF37;
            --dark: #020202;
            --glass: rgba(255, 255, 255, 0.03);
        }

        body {
            background-color: var(--dark);
            color: white;
            font-family: 'Montserrat', sans-serif;
            overflow: hidden; /* Locked until unlocked */
            margin: 0;
            height: 100vh;
        }

        /* üé• Cinematic Noise & Scanlines */
        .scanlines {
            position: fixed; inset: 0;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2));
            background-size: 100% 4px;
            pointer-events: none; z-index: 50; opacity: 0.3;
        }
        
        /* Typography */
        .font-royal { font-family: 'Cinzel', serif; }
        .font-script { font-family: 'Pinyon Script', cursive; }

        /* ‚ú® Gold Text Gradient */
        .text-gold {
            background: linear-gradient(to right, #bf953f, #fcf6ba, #b38728, #fbf5b7);
            -webkit-background-clip: text; color: transparent;
            text-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }

        /* Glass Panel */
        .glass-hud {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(212, 175, 55, 0.15);
            box-shadow: 0 0 30px rgba(0,0,0,0.8);
        }

        /* Animations */
        .blink { animation: blinker 1s linear infinite; }
        @keyframes blinker { 50% { opacity: 0; } }

        .loader-bar {
            box-shadow: 0 0 10px #D4AF37, 0 0 20px #D4AF37;
        }
        
        /* 3D Photo Float */
        .tilt-card { transform-style: preserve-3d; transform: perspective(1000px); }
        .tilt-card img { transform: translateZ(20px); }
        
        .screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 1s ease;
            background: var(--dark);
            z-index: 10;
        }
        .hidden { display: none; opacity: 0; }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-thumb { background: #D4AF37; border-radius: 10px; }
        ::-webkit-scrollbar-track { background: #000; }
    </style>
</head>
<body>

    <div class="scanlines"></div>

    <audio id="bg-music" loop>
        <source src="music.mp3" type="audio/mpeg">
    </audio>
    <audio id="voice-note">
        <source src="voice.mp3" type="audio/mpeg">
    </audio>

    <section id="screen-server" class="screen z-50">
        <div class="w-full max-w-lg px-8">
            <div class="flex justify-between text-[10px] text-[#D4AF37] tracking-[0.3em] mb-2 font-mono">
                <span>SERVER: ADHI_MAIN</span>
                <span>TARGET: HER_HEART</span>
            </div>
            
            <div class="h-1 bg-gray-900 w-full mb-4 overflow-hidden">
                <div id="load-bar" class="h-full bg-[#D4AF37] w-0 loader-bar"></div>
            </div>
            
            <div class="text-left font-mono text-xs text-green-400 h-20 overflow-hidden">
                <p id="terminal-text">>> INITIATING PROTOCOL...</p>
            </div>
        </div>
    </section>

    <section id="screen-lock" class="screen hidden z-40">
        <div class="absolute inset-0 opacity-20 bg-[url('https://images.unsplash.com/photo-1518621736915-f3b1c41bfd00?q=80&w=2000&auto=format&fit=crop')] bg-cover bg-center"></div>
        
        <div class="glass-hud p-12 rounded-none md:rounded-2xl max-w-md w-full text-center relative z-10 border-t-4 border-t-[#D4AF37]">
            <p class="text-[10px] tracking-[0.4em] text-gray-400 mb-6 uppercase">Biometric Security</p>
            <h1 class="font-royal text-3xl mb-8 text-white">Identity Verification</h1>
            
            <div class="relative group mb-8">
                <input type="password" id="password" placeholder="ENTER PASSCODE" 
                    class="w-full bg-black/40 border border-white/10 py-4 px-6 text-center text-xl tracking-[0.5em] text-[#D4AF37] outline-none focus:border-[#D4AF37] transition-all font-royal placeholder-gray-700">
                <div class="absolute top-0 left-0 w-full h-[2px] bg-[#D4AF37] opacity-0 group-focus-within:opacity-100 group-focus-within:animate-[scan_2s_infinite]"></div>
            </div>
            
            <button onclick="checkAccess()" class="w-full py-4 bg-[#D4AF37] text-black font-bold tracking-[0.3em] text-xs hover:bg-white transition-colors duration-500 uppercase">
                Access Heart
            </button>
            <p id="error-msg" class="text-red-500 text-[10px] mt-4 tracking-widest opacity-0 font-mono">>> ACCESS DENIED //</p>
        </div>
    </section>

    <section id="screen-apology" class="screen hidden z-30 px-6">
        <div class="max-w-3xl text-center relative">
            <div class="absolute -top-20 left-1/2 transform -translate-x-1/2 w-px h-20 bg-gradient-to-b from-transparent to-[#D4AF37]"></div>
            
            <h2 class="font-royal text-4xl md:text-6xl text-white mb-8 leading-tight">
                "Silence is the loudest cry."
            </h2>
            
            <div class="glass-hud p-10 text-left border-l-2 border-[#D4AF37] mb-12 relative overflow-hidden">
                <div class="absolute top-0 right-0 p-4 opacity-20">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="white"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
                </div>
                <p class="font-light tracking-wide leading-loose text-gray-300 text-sm md:text-lg">
                    <span class="text-[#D4AF37] font-bold">Adhi here.</span><br><br>
                    I messed up. The quarrel we had... it broke the connection between us, and I've been feeling like a server offline‚Äîuseless and empty. <br><br>
                    I don't want to be right. I just want to be with you. <br>
                    <span class="italic text-white">Please hold the button below to accept my apology.</span>
                </p>
            </div>

            <div class="relative inline-block">
                <button onmousedown="startForgive()" onmouseup="stopForgive()" ontouchstart="startForgive()" ontouchend="stopForgive()" 
                    class="w-20 h-20 rounded-full border border-white/20 flex items-center justify-center relative overflow-hidden group mx-auto cursor-pointer">
                    <div id="fill-circle" class="absolute inset-0 bg-[#D4AF37] scale-0 rounded-full transition-transform duration-[2000ms] ease-linear origin-center"></div>
                    <span class="text-2xl relative z-10 animate-pulse">‚ù§Ô∏è</span>
                </button>
                <p class="mt-4 text-[9px] tracking-[0.3em] text-gray-500 uppercase">HOLD TO FORGIVE</p>
            </div>
        </div>
    </section>

    <section id="screen-paradise" class="hidden min-h-screen w-full relative z-20 bg-[#050505] overflow-y-auto">
        
        <div class="w-full h-screen flex flex-col items-center justify-center relative">
            <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-gray-900 via-[#000] to-[#000] opacity-80"></div>
            
            <p class="text-[#D4AF37] tracking-[0.5em] text-xs mb-6 font-royal relative z-10">CONNECTION RESTORED</p>
            <h1 class="font-script text-6xl md:text-8xl text-white mb-4 relative z-10">Happy Hug Day</h1>
            <p class="text-gray-500 text-xs tracking-[0.2em] relative z-10">YOU ARE MY HOME</p>

            <div class="absolute bottom-10 animate-bounce text-[#D4AF37]">‚Üì</div>
        </div>

        <div class="max-w-4xl mx-auto px-6 pb-20">

            <div class="glass-hud p-8 rounded-2xl mb-24 border border-[#D4AF37]/30">
                <div class="flex flex-col md:flex-row items-center gap-6">
                    <button onclick="toggleVoice()" id="play-btn" class="w-16 h-16 rounded-full bg-[#D4AF37] flex items-center justify-center text-black shadow-[0_0_20px_#D4AF37] hover:scale-105 transition-transform">
                        <span id="play-icon" class="text-2xl font-bold">‚ñ∂</span>
                    </button>
                    <div class="text-center md:text-left flex-1">
                        <p class="font-royal text-[#D4AF37] text-sm mb-1">VOICE MESSAGE</p>
                        <p class="text-xs text-gray-400 mb-3">Music will pause automatically while you listen.</p>
                        <div class="w-full h-1 bg-gray-800 rounded-full overflow-hidden">
                            <div id="voice-progress" class="h-full bg-white w-0 transition-all duration-100"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-32">
                <div class="tilt-card glass-hud p-2 rounded-lg" data-tilt>
                    <div class="h-64 overflow-hidden rounded mb-4 border border-white/10">
                        <img src="photo1.jpeg" onerror="this.src='https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?auto=format&fit=crop&w=600'" class="w-full h-full object-cover">
                    </div>
                    <p class="font-script text-2xl text-center">First Hug</p>
                </div>
                 <div class="tilt-card glass-hud p-2 rounded-lg md:-mt-10" data-tilt>
                    <div class="h-64 overflow-hidden rounded mb-4 border border-white/10">
                        <img src="photo2.jpeg" onerror="this.src='https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?auto=format&fit=crop&w=600'" class="w-full h-full object-cover">
                    </div>
                    <p class="font-script text-2xl text-center">The Quarrel</p>
                </div>
                 <div class="tilt-card glass-hud p-2 rounded-lg" data-tilt>
                    <div class="h-64 overflow-hidden rounded mb-4 border border-white/10">
                        <img src="photo3.jpeg" onerror="this.src='https://images.unsplash.com/photo-1518199266791-5375a83190b7?auto=format&fit=crop&w=600'" class="w-full h-full object-cover">
                    </div>
                    <p class="font-script text-2xl text-center">Forever</p>
                </div>
            </div>

            <div class="text-center">
                <p class="font-royal text-sm text-[#D4AF37] mb-4">END OF TRANSMISSION</p>
                <p class="text-[10px] text-gray-600">CODED WITH REGRET & LOVE</p>
            </div>

        </div>
    </section>

    <canvas id="confetti" class="fixed inset-0 pointer-events-none z-[100]"></canvas>

    <script>
        // --- ‚öôÔ∏è CONFIGURATION ---
        const SECRET_HASH = "PUT_YOUR_GENERATED_HASH_HERE"; 

        // --- üì° SERVER ANIMATION ---
        window.onload = () => {
            const term = document.getElementById('terminal-text');
            const lines = [
                ">> CONNECTING TO SATELLITE...", 
                ">> ENCRYPTING DATA PACKETS...", 
                ">> SEARCHING FOR: HER HEART...", 
                ">> HEARTBEAT DETECTED.", 
                ">> ESTABLISHING SECURE LINK..."
            ];
            
            let i = 0;
            const interval = setInterval(() => {
                if(i < lines.length) {
                    term.innerHTML += `<br>${lines[i]}`;
                    i++;
                }
            }, 600);

            // Loader Bar
            gsap.to("#load-bar", {width: "100%", duration: 3.5, ease: "power1.inOut", onComplete: () => {
                clearInterval(interval);
                gsap.to("#screen-server", {opacity: 0, duration: 1, onComplete: () => {
                    document.getElementById('screen-server').style.display = 'none';
                    document.getElementById('screen-lock').classList.remove('hidden');
                    gsap.fromTo("#screen-lock", {opacity: 0, scale: 0.95}, {opacity: 1, scale: 1, duration: 1});
                }});
            }});
        };

        // --- üîê SECURITY ---
        async function checkAccess() {
            const input = document.getElementById('password').value;
            const msgBuffer = new TextEncoder().encode(input.toLowerCase().trim());
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashed = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            
            // REMOVE "|| true" AFTER PASTING HASH
            if (hashed === SECRET_HASH || SECRET_HASH === "PUT_YOUR_GENERATED_HASH_HERE") {
                gsap.to("#screen-lock", {y: -50, opacity: 0, duration: 0.8, onComplete: () => {
                    document.getElementById('screen-lock').classList.add('hidden');
                    document.getElementById('screen-apology').classList.remove('hidden');
                    gsap.fromTo("#screen-apology", {opacity: 0}, {opacity: 1, duration: 1.5});
                    
                    // Start Background Music Softly
                    const bgm = document.getElementById('bg-music');
                    bgm.volume = 0.3;
                    bgm.play().catch(e => console.log("Audio waiting for interaction"));
                }});
            } else {
                gsap.to("#error-msg", {opacity: 1, yoyo: true, repeat: 1});
                gsap.to(".glass-hud", {x: 10, yoyo: true, repeat: 5, duration: 0.05});
            }
        }

        // --- ‚ù§Ô∏è FORGIVENESS BUTTON ---
        let holdTimer;
        function startForgive() {
            document.getElementById('fill-circle').style.transform = "scale(1)";
            holdTimer = setTimeout(() => {
                // Success
                gsap.to("#screen-apology", {opacity: 0, duration: 1, onComplete: () => {
                    document.getElementById('screen-apology').classList.add('hidden');
                    const paradise = document.getElementById('screen-paradise');
                    paradise.classList.remove('hidden');
                    
                    // Unlock Scroll
                    document.body.style.overflow = "auto";
                    
                    gsap.fromTo(paradise, {opacity: 0}, {opacity: 1, duration: 2});
                    startConfetti();
                }});
            }, 2000);
        }
        function stopForgive() {
            clearTimeout(holdTimer);
            document.getElementById('fill-circle').style.transform = "scale(0)";
        }

        // --- üéôÔ∏è SMART AUDIO SYSTEM ---
        const bgMusic = document.getElementById('bg-music');
        const voiceNote = document.getElementById('voice-note');
        const playBtn = document.getElementById('play-btn');
        const playIcon = document.getElementById('play-icon');
        let isPlayingVoice = false;

        function toggleVoice() {
            if(!isPlayingVoice) {
                // FADE OUT MUSIC
                gsap.to(bgMusic, {volume: 0, duration: 1, onComplete: () => bgMusic.pause()});
                
                // PLAY VOICE
                voiceNote.play();
                playIcon.innerText = "‚è∏";
                isPlayingVoice = true;
                
                // Update Progress Bar
                voiceNote.ontimeupdate = () => {
                    const percent = (voiceNote.currentTime / voiceNote.duration) * 100;
                    document.getElementById('voice-progress').style.width = percent + "%";
                };

                // ON END: FADE MUSIC BACK IN
                voiceNote.onended = () => {
                    isPlayingVoice = false;
                    playIcon.innerText = "‚ñ∂";
                    bgMusic.play();
                    gsap.to(bgMusic, {volume: 0.3, duration: 2});
                };
            } else {
                voiceNote.pause();
                playIcon.innerText = "‚ñ∂";
                isPlayingVoice = false;
                bgMusic.play();
                gsap.to(bgMusic, {volume: 0.3, duration: 1});
            }
        }

        // --- üéâ CONFETTI ---
        function startConfetti() {
            const canvas = document.getElementById('confetti');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            let particles = [];
            
            for(let i=0; i<80; i++) {
                particles.push({
                    x: Math.random() * canvas.width, y: -20,
                    size: Math.random() * 4 + 1,
                    speed: Math.random() * 2 + 1,
                    color: '#D4AF37'
                });
            }
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => {
                    p.y += p.speed;
                    if(p.y > canvas.height) p.y = -20;
                    ctx.fillStyle = p.color;
                    ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2); ctx.fill();
                });
                requestAnimationFrame(animate);
            }
            animate();
        }

        // Init Tilt
        VanillaTilt.init(document.querySelectorAll(".tilt-card"), {
            max: 15, speed: 400, glare: true, "max-glare": 0.2
        });
    </script>
</body>
</html>
